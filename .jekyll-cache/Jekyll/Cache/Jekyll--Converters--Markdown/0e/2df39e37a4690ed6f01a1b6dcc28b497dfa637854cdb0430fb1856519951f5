I"§<p>Problem</p>

<p>Sometimes after deleting a namespace (for example kiali-operator), it sticks on â€œTerminatingâ€ state, and when you enter:</p>

<p>kubectl delete namespace kiali-operator</p>

<p>Youâ€™ll get</p>

<p>warning: Immediate deletion does not wait for confirmation that the running resource has been terminated. The resource may continue to run on the cluster indefinitely.
Error from server (Conflict): Operation cannot be fulfilled on namespaces â€œkiali-operatorâ€: The system is ensuring all content is removed from this namespace.  Upon completion, this namespace will automatically be purged by the system.</p>

<p>Solution</p>

<p>Letâ€™s get rid of kiali-operator namespace!</p>

<p>kubectl get ns kiali-operator -o json &gt; kiali-operator.json</p>

<p>Edit kiali-operator.json and remove kubernetes from finalizers.</p>

<p>{
    â€œapiVersionâ€: â€œv1â€,
    â€œkindâ€: â€œNamespaceâ€,
    â€œmetadataâ€: {
        â€œannotationsâ€: {
            â€œkubectl.kubernetes.io/last-applied-configurationâ€: â€œ{"apiVersion":"v1","kind":"Namespace","metadata":{"annotations":{},"labels":{"app":"kiali-operator","version":"v0.21.0"},"name":"kiali-operator"}}\nâ€
        },
        â€œcreationTimestampâ€: â€œ2019-06-17T05:03:48Zâ€,
        â€œdeletionTimestampâ€: â€œ2019-06-17T05:11:37Zâ€,
        â€œlabelsâ€: {
            â€œappâ€: â€œkiali-operatorâ€,
            â€œversionâ€: â€œv0.21.0â€
        },
        â€œnameâ€: â€œkiali-operatorâ€,
        â€œresourceVersionâ€: â€œ34541023â€,
        â€œselfLinkâ€: â€œ/api/v1/namespaces/kiali-operatorâ€,
        â€œuidâ€: â€œ4a4997ec-90bd-11e9-a3be-0619e18c0adcâ€
    },
    â€œspecâ€: {
        â€œfinalizersâ€: [
            â€œkubernetesâ€ &lt;â€“ remove it
        ]
    },
    â€œstatusâ€: {
        â€œphaseâ€: â€œTerminatingâ€
    }
}</p>

<p>Using kubernetes proxy</p>

<p>kubernetes proxy</p>

<p>Then run this command</p>

<p>curl -k -H â€œContent-Type: application/jsonâ€ -X PUT â€“data-binary @kiali-operator.json http://127.0.0.1:8001/api/v1/namespaces/kiali-operator/finalize</p>

<p>Now, check your namespaces</p>

<p>kubernetes get namespaces</p>

<p>Namespace kiali-operator has been gone!</p>
:ET